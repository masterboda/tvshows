<!DOCTYPE html>
<html lang="uk">
<head>
	<meta charset="utf-8" />
	<title>TV shows</title>
	<meta name="description" content="" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" href="images/icons/" />

	<link rel="stylesheet" href="/css/fonts.css">

	<link rel="stylesheet" href="/css/main.css">
</head>
<body>

	<div id="app"></div>

	<script src="/js/customSPA.js"></script>
	<script src="/js/app.js"></script>
	<script>
		
		let myApp = new App({
			elm: '#app'
		});


		/* Data
		======================================= */
		const nav = [{href: '/popular', text: 'Popular TV shows'}, {href: '/top-rated', text: 'TOP rated'}];


		/* Routes
		======================================= */

		myApp.Router([
			{
				path: ['/', '/popular', '/index.html'],
				component: null,
				callback: function(urlParams) {
					myApp.requestAPI({
						props: 'tv/popular',
						params : {
							language: 'en-US',
							page: urlParams.page || 1
						}
					})
					.then(response => response.json())
					.then(data => {
						myApp.render(Popular(data));
					});
				}
			},

			{
				path: '/top-rated',
				component: null,
				callback: function(urlParams) {
					myApp.requestAPI({
						props: 'tv/top_rated',
						params : {
							language: 'en-US',
							page: urlParams.page || 1
						}
					})
					.then(response => response.json())
					.then(data => {
						myApp.render(TopRated(data));
					});
				}
			},

			{
				path: '/get-tv',
				component: null,
				callback: function(urlParams) {
					myApp.requestAPI({
						props: `tv/${urlParams.id}`,
						params : {
							language: 'en-US',
						}
					})
					.then(response => response.json())
					.then(data => {
						myApp.render(TvInfo(data));
					});
				}
			}

		]);
		
		/*
		myApp.newRoute(['/', '/popular'],
		{
			component: null,
			callback: function(urlParams) {
				myApp.requestAPI({
					props: 'tv/popular',
					params : {
						language: 'en-US',
						page: urlParams.page || 1
					}
				})
				.then(response => response.json())
				.then(data => {
					myApp.render(Popular(data));
				});
			}
		});

		myApp.newRoute('/top-rated',
		{
			component: null,
			callback: function(urlParams) {
				myApp.requestAPI({
					props: 'tv/top_rated',
					params : {
						language: 'en-US',
						page: urlParams.page || 1
					}
				})
				.then(response => response.json())
				.then(data => {
					myApp.render(TopRated(data));
				});
			}
		});

		myApp.newRoute('/get-tv',
		{
			component: null,
			callback: function(urlParams) {
				myApp.requestAPI({
					props: `tv/${urlParams.id}`,
					params : {
						language: 'en-US',
					}
				})
				.then(response => response.json())
				.then(data => {
					myApp.render(TvInfo(data));
				});
			}
		});*/	

	</script>
</body>
</html>